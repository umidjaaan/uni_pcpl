package main

import (
	"fmt"      // Пакет для ввода и вывода данных
	"os"       // Пакет для работы с операционной системой (выход из программы)
	"strings"  // Пакет для обработки строк (перевод в верхний регистр)
)

// Currency — это структура (аналог класса), описывающая валюту.
// В Go мы используем структуры для группировки данных.
type Currency struct {
	Name string  // Полное название валюты
	Rate float64 // Курс обмена: сколько рублей стоит 1 единица этой валюты
}

// Convert — это метод структуры Currency.
// Он принимает количество валюты и возвращает эквивалент в рублях.
func (c Currency) Convert(amount float64) float64 {
	return amount * c.Rate
}

func main() {
	// Инициализируем карту (map), где ключ — это код валюты (строка),
	// а значение — структура Currency с данными.
	exchangeRates := map[string]Currency{
		"USD": {Name: "Доллар США", Rate: 79.01},
		"EUR": {Name: "Евро", Rate: 99.20},
		"CNY": {Name: "Китайский юань", Rate: 12.65},
		"UZS": {Name: "Узбекский сум", Rate: 0.0072}, // Обновленная валюта по вашей просьбе
	}

	fmt.Println("==========================================")
	fmt.Println("   ДОМАШНЕЕ ЗАДАНИЕ: КОНВЕРТЕР ВАЛЮТ (GO)")
	fmt.Println("==========================================")

	// Выводим список доступных валют из карты
	fmt.Println("Доступные валюты для конвертации в рубли:")
	for code, info := range exchangeRates {
		fmt.Printf("[%s] - %s (Курс: %.4f руб.)\n", code, info.Name, info.Rate)
	}
	fmt.Println("------------------------------------------")

	var code string
	var amount float64

	// Запрашиваем код валюты у пользователя
	fmt.Print("Введите код валюты (например, UZS): ")
	fmt.Scan(&code)
	code = strings.ToUpper(code) // Превращаем в заглавные буквы для соответствия ключам в map

	// Проверяем, существует ли такая валюта в нашей базе данных
	// В Go обращение к карте может возвращать второй аргумент (ok), указывающий на наличие ключа
	currency, exists := exchangeRates[code]
	if !exists {
		fmt.Printf("Ошибка: Валюта с кодом '%s' не найдена.\n", code)
		os.Exit(1) // Завершаем программу, если код неверный
	}

	// Запрашиваем сумму для перевода
	fmt.Printf("Введите сумму в %s: ", code)
	_, err := fmt.Scan(&amount)

	// Простая обработка ошибок ввода (например, если ввели буквы вместо цифр)
	if err != nil || amount < 0 {
		fmt.Println("Ошибка: Введите корректное положительное число.")
		return
	}

	// Вызываем метод структуры для выполнения расчета
	rubResult := currency.Convert(amount)

	// Вывод итогового результата с форматированием до 2 знаков после запятой
	fmt.Println("------------------------------------------")
	fmt.Printf("РЕЗУЛЬТАТ: %.2f %s = %.2f Российских рублей\n", amount, code, rubResult)
	fmt.Println("==========================================")
}
